# 电梯管理系统登录功能测试说明

## 功能概述
已成功对接后端cookie+session登录认证机制，支持角色认证和页面跳转。

## 测试步骤

### 1. 访问登录页面
- 打开浏览器访问：http://localhost:5173/login
- 或者直接访问：http://localhost:5173/ （未登录会自动跳转到登录页）

### 2. 登录测试

#### 管理员登录测试
- **用户名/邮箱**：输入管理员的手机号或邮箱
- **密码**：输入对应密码
- **预期结果**：登录成功后跳转到 `/` (Dashboard.vue)

#### 维修人员登录测试
- **用户名/邮箱**：输入维修人员的手机号或邮箱
- **密码**：输入对应密码
- **预期结果**：登录成功后跳转到 `/maintenance-dashboard` (MaintenanceWorkerDashboard.vue)

### 3. 权限验证测试

#### 管理员权限
- 可以访问所有页面：
  - 主仪表盘 (`/`)
  - 系统监控页面 (`/system/*`)
  - 异常数据页面 (`/abnormal-data`)
  - 用户管理页面 (`/user-management`)
  - 维护记录页面 (`/maintenance-log`)
  - 管理员页面 (`/admin`)

#### 维修人员权限
- 只能访问维修人员工作台 (`/maintenance-dashboard`)
- 访问其他页面会被重定向

### 4. 登出测试
- 点击页面右上角的登出按钮
- **预期结果**：清除登录状态，跳转到登录页面

## 技术实现要点

### 后端API对接
- **登录接口**：`POST /api/users/login`
- **获取用户信息**：`GET /api/users/getLoginUser`
- **登出接口**：`POST /api/users/logout`
- **Cookie支持**：所有请求都携带 `withCredentials: true`

### 前端状态管理
- 使用 `sessionStorage` 保存登录状态
- 支持页面刷新后状态保持
- 自动清理过期状态

### 路由守卫
- 全局前置守卫检查认证状态
- 基于角色的页面访问控制
- 自动重定向到合适的页面

## 注意事项

1. **后端服务**：确保后端服务正在运行并且API可访问
2. **跨域配置**：确保后端已正确配置CORS和cookie支持
3. **数据库**：确保用户数据已正确配置角色字段
4. **测试数据**：需要在数据库中准备测试用户数据

## 故障排除

### 登录失败
- 检查网络请求是否正常
- 检查后端API返回的错误信息
- 确认用户名密码是否正确

### 页面跳转异常
- 检查用户角色是否正确设置
- 检查路由配置是否正确
- 查看浏览器控制台错误信息

### Cookie问题
- 确认axios配置了 `withCredentials: true`
- 检查后端是否支持cookie
- 确认域名和端口配置正确